name: learn-github-actions
run-name: ${{ github.actor }} is learning GitHub Actions
on: [push]
jobs:
  baremetal-int:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4
      - name: "Checkout F' Repository"
        uses: actions/checkout@v4
        with:
          submodules: true
          path: ${{ inputs.fprime_location }}
      - name: "Build"
        run: |
             python3 -m venv ./fprime-venv
             . ./fprime-venv/bin/activate
             pip3 install -r ${{ inputs.fprime_location }}./fprime/requirements.txt
             curl -fsSL https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | BINDIR=. sh
             git clone https://github.com/SterlingPeet/arduino-cli-cmake-wrapper.git
             cd arduino-cli-cmake-wrapper
             git checkout update/refactor
             pip install .
             cd ..
             fprime-util generate
        shell: bash
